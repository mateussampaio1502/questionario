<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Formulário</title>

    <!--SweetAlert2 conection-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</head>
<body>
    <header>
        <h1>ANÁLISE DE EFICIÊNCIA ENERGÉTICA</h1>
    </header>
    <div class="campo">
        <p>Nesta etapa, estamos buscando entender o nível de eficiência energética da rede e dos dispositivos ligados nela.</p>
        <p id="obg">* Indica uma pergunta obrigatória</p>
    </div>
    <div class="campo" id="p4">
        <p class="required">Considerando os parâmetros fornecidos abaixo, avalie o nível de qualidade de seus eletrodomésticos no que diz respeito a tempo de uso e funcionamento.</p>
        <ul type="none">
            <li>1) Eficiência dos aparelhos eletrodomésticos.</li>
            <li>Nível A - Os equipamentos apresentam pouco <strong class="tempo-de-uso">tempo de uso</strong> e funcionam satisfatoriamente.</li>
            <li>Nível B - Os equipamentos apresentam <strong class="tempo-de-uso">tempo considerável de uso</strong>, mas funcionam satisfatoriamente.</li>
            <li>Nível C - Os equipamentos apresentam pouco <strong class="tempo-de-uso">tempo de uso</strong>, mas apresentam algumas <strong class="falhas-mec">falhas mecânicas</strong> e/ou <strong class="falhas-elet">eletrônicas</strong>.</li>
            <li>Nível D - Os equipamentos apresentam <strong class="tempo-de-uso">tempo considerável de uso</strong> e apresentam <strong class="falhas-mec">falhas mecânicas</strong> e/ou <strong class="falhas-elet">eletrônicas</strong> ou os equipamentos excederam sua vida útil.</li>
        </ul>
        <input type="radio" name="option" id="nivel-a">
        <label for="nivel-a">Nível A</label><br>
        <input type="radio" name="option" id="nivel-b">
        <label for="nivel-b">Nível B</label><br>
        <input type="radio" name="option" id="nivel-c">
        <label for="nivel-c">Nível C</label><br>
        <input type="radio" name="option" id="nivel-d">
        <label for="nivel-d">Nível D</label><br>
    </div>
    <div class="campo" id="p5">
        <p class="required">Considerando o parâmetro abaixo, avalie sua residência no que diz respeito à <strong class="man-periodo">periodicidade de manutenções.</strong></p>
        <ul type="none">
            <li>Nível A - São feitas manutenções periódicas baseadas numa periodicidade determinada por um profissional.</li>
            <li>Nível B - Não são feitas manutenções, a menos que seja identificado algum problema sério nas instalações.</li>
        </ul>
        
        <input type="radio" name="option2" id="nivel-A">
        <label for="nivel-A">Nível A</label><br>
        <input type="radio" name="option2" id="nivel-B">
        <label for="nivel-B">Nível B</label><br>
    </div>
    <div class="nav">
        <button>
            <a href="etapa1.html" rel="previous" onclick="salvarDados()">Voltar</a>
        </button>
        <button>
            <a href="etapa3.html" onclick="salvarDados()">Próximo</a>
        </button>
        <input type="button" value="Salvar" class="save" onclick="salvarDados()">
    </div>
    <footer>
        <p>Mateus Sampaio &reg;</p>
    </footer>

    <script>
        const detailed = document.querySelectorAll('.tempo-de-uso, .falhas-mec, .falhas-elet, .man-periodo');
        detailed.forEach(element => {
            element.addEventListener('click', detail);
        });

        function detail(event) {
            if (event.target.classList.contains('tempo-de-uso')) {
                Swal.fire({
                    title: 'Detalhamento do tempo de uso',
                    html: '<ul type="none"><li>a) Até 5 anos: Pouco tempo de uso.</li><li>b) Até 10 anos: Tempo considerável de uso.</li><li>c) Acima de 10 anos: excedeu a vida útil.</li></ul>',
                    icon: 'info'
                });
            } else if (event.target.classList.contains('falhas-mec')) {
                Swal.fire({
                    title: 'Detalhamento das falhas mecânicas',
                    html: '<ul type="none"><li>a) Ruídos anormais durante o funcionamento do equipamento.</li><li>b) Vazamentos de água, óleo ou outros fluidos.</li> <li>c) Problemas de vedação que causam escape de vapor ou ar.</li> <li>d) Dificuldades na abertura ou fechamento de compartimentos.</li> <li>e) Quebras visíveis em peças estruturais, como carcaças, portas, alças, etc.</li> <li>f) Desgaste excessivo em componentes móveis, como rolamentos, engrenagens, etc.</li></ul>',
                    icon: 'info'
                });
            } else if (event.target.classList.contains('falhas-elet')) {
                Swal.fire({
                    title: 'Detalhamento das falhas eletrônicas',
                    html: '<ul type="none"><li>a) Desligamentos repentinos ou intermitentes do equipamento.</li><li>b) Falhas no display ou nos controles digitais, como botões que não respondem ou mostradores com informações incorretas.</li><li>c) Erros de funcionamento ao selecionar modos ou configurações específicas.</li><li>d) Problemas de aquecimento ou superaquecimento de componentes eletrônicos.</li><li>e) Curto circuitos evidentes, faíscas ou cheiro de queimado.</li><li>f) Interferências na conexão com outros dispositivos, como falhas de comunicação em sistemas integrados.</li></ul>',
                    icon: 'info'
                });
            } else if (event.target.classList.contains('man-periodo')){
                swal.fire({
                    title: 'Periodicidade das manutenções',
                    html: '<ul type="none"><li>Eficiência das instalações elétricas.</li><br><li>No que diz respeito à periodicidade das manutenções de uma instalação elétrica, esta é personalizada e varia de acordo com as condições climáticas, a necessidade de potência e a complexidade das instalações (NBR5410, p. 168, 2004). Quanto mais adversas as condições e maior a necessidade de carga, menor o período entre manutenções, porém quanto mais complexos os sistemas, maior deve ser o período. Além disso, esse valor de periodicidade deve ser estimado baseado nas prescrições da norma.</li></ul>',
                    icon: 'info'
                })
            }
        }

        function salvarDados() {
            const nivelA = document.getElementById('nivel-a').checked;
            const nivelB = document.getElementById('nivel-b').checked;
            const nivelC = document.getElementById('nivel-c').checked;
            const nivelD = document.getElementById('nivel-d').checked;
            const nivelA2 = document.getElementById('nivel-A').checked;
            const nivelB2 = document.getElementById('nivel-B').checked;

            let nivelEficiencia = '';
            if (nivelA) nivelEficiencia = 'A';
            else if (nivelB) nivelEficiencia = 'B';
            else if (nivelC) nivelEficiencia = 'C';
            else if (nivelD) nivelEficiencia = 'D';

            let nivelManutencao = '';
            if (nivelA2) nivelManutencao = 'A';
            else if (nivelB2) nivelManutencao = 'B';

            if (nivelEficiencia && nivelManutencao) {
                const dados = {
                    nivelEficiencia: nivelEficiencia,
                    nivelManutencao: nivelManutencao
                };

                localStorage.setItem('dadosEficiencia', JSON.stringify(dados));
                Swal.fire({
                    toast: true,
                    position: 'top-end',
                    icon: 'success',
                    title: 'Operação bem sucedida!',
                    text: 'Dados salvos com sucesso!',
                    showConfirmButton: false,
                    timer: 3000,
                    timerProgressBar: true,
                    didOpen: (toast) => {
                        toast.addEventListener('mouseenter', Swal.stopTimer)
                        toast.addEventListener('mouseleave', Swal.resumeTimer)
                    }
                })
                
               
            } else {
                Swal.fire({
                    title: 'Campos Incompletos',
                    text: 'Por favor, preencha todos os campos.',
                    icon: 'warning'
                });
            }
        }

        function carregarDados() {
            const dados = JSON.parse(localStorage.getItem('dadosEficiencia'));
            if (dados) {
                if (dados.nivelEficiencia === 'A') document.getElementById('nivel-a').checked = true;
                else if (dados.nivelEficiencia === 'B') document.getElementById('nivel-b').checked = true;
                else if (dados.nivelEficiencia === 'C') document.getElementById('nivel-c').checked = true;
                else if (dados.nivelEficiencia === 'D') document.getElementById('nivel-d').checked = true;

                if (dados.nivelManutencao === 'A') document.getElementById('nivel-A').checked = true;
                else if (dados.nivelManutencao === 'B') document.getElementById('nivel-B').checked = true;
            }
            Swal.fire({
                    toast: true,
                    position: 'top',
                    icon: 'time',
                    title: 'Continue de onde parou.',
                    text: 'Seu progresso foi salvo!',
                    showConfirmButton: true,
                    timer: 1500,
                    timerProgressBar: true,
                });
        }

        window.onload = carregarDados();
    </script>
</body>
</html>
